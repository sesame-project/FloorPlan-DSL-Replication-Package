 You can also use the occupancy grid to generate the environment, but you need a really good map without noise. This however will not take into account the material of the wall, and will assume that the wall/material of the wall looks the same for all. 
 
[[Environment representation]] 
[[Material]]
[[Simulation]]

#P9 